{% extends "baseNavbar.html" %}
{% block content %}
{% if cadastrar %}
<form  method = "POST">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for message in messages %}
        <p class="alert alert-danger">{{ message }}</p>
      {% endfor %}
    {% endif %}
    {% endwith %}  
    <div class="form-group">
        {{ ProdutoForm.csrf_token }} 
        <label class="mr-sm-2 sr-only" for="categoria">Categoria do produto</label>
        <select class="custom-select mr-sm-2" id="categoria" name="categoria">
          
            {% for categoria in categorias %}
            <option>{{ categoria.Categoria }}</option>
            {% endfor %}
          </select>
        <label for="nome">Nome</label>
        {{ ProdutoForm.nome(id="nome",class="form-control", placeholder="Nome do Produto")}}
    </div>
    <div class="form-group">
        <label for="preco">Preço do Produto</label>
        {{ ProdutoForm.preco(class="form-control dinheiro ", id="preco", placeholder="Nome Produto") }}
        </div>

    <div class="form-group">
        <label for="fornecedor">Fornecedor</label>
        {{ ProdutoForm.fornecedor(type="fornecedor",class="form-control", id="cnpj", placeholder="CNPJ do fornecedor") }}
    </div>

   
     <button type="submit" class="btn btn-primary" action="/produto/cadastrar/">Enviar</button>
  </form>
  
  {%else%}
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for message in messages %}
        <p class="alert alert-danger">{{ message }}</p>
      {% endfor %}
    {% endif %}
    {% endwith %} 
  
  {{ ProdutoForm.csrf_token }} 
  {% if pesquisa %} 
    {%for fon in produtos%}
    <form  method = "POST">
        <label class="mr-sm-2 sr-only" for="categoria">Categoria do produto</label>
        <select class="custom-select mr-sm-2" id="categoria" name="categoria">
          
            {% for categoria in categorias %}
            <option>{{ categoria.nome }}</option>
            {% endfor %}
          </select>
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input type="text" class="form-control" id="nome" name="nome"value="{{fon[0].nome}}">
      
    </div>
    <div class="form-group">
      <label for="preco">Preço do Produto:</label>
      <input type="text" class="dinheiro form-control" id="preco" name="preco"value="{{fon[0].preco}}">
      
    </div>
    <div class="form-group">
      <label for="fornecedor">fornecedor</label>
      <input type="fornecedor" class="form-control" id="cnpj" name="fornecedor" value="{{fon[0].fornecedor.nome}}"readonly="readonly">
    </div>
    <div class="form-group">
    <button type="submit" class="btn btn-primary" formaction="/produto/deletar/{{fon[0].id}}" style={% if pesquisa %} "display:Line"{%else%}"display:none"{%endif%}>Deletar Produto</button>  
    <button type="submit" class="btn btn-primary" formaction="/produto/atualizar/{{fon[0].id}}" style={% if pesquisa %} "display:Line"{%else%}"display:none"{%endif%}>Atualizar Produto</button>         
    </div>
  </form>
    {%endfor%}
    {%else%}
    <form  method = "POST">
    <div class="form-group">
      {{ ProdutoForm.csrf_token }} 
      <label for="nome">Nome</label>
      {{ProdutoForm.nome(id="nome",class="form-control", placeholder="Nome do Produto")}}
      </div>
      <div class="form-group">
        {{ ProdutoForm.preco(class="form-control", id="preco", placeholder="preco",value="preco",style="display:none")}}
      </div>
  
      <div class="form-group">
        {{ ProdutoForm.fornecedor(type="fornecedor",class="form-control", id="cnpj", placeholder="fornecedor",style="display:none", value="1") }}
     </div>

      {%endif%}
    <div class="form-group">
    <button type="submit" class="btn btn-primary" style = {% if pesquisa %}"display:none"{%endif%}>{% if pesquisa %} Voltar{%else%} Pesquisar{%endif%}</button>
    </div>
    <div class="form-group">
    </div>
  </form>
{% endif %}


{% endblock %}